<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title th:text="${titulo}">Jugadores</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
	<style>
		.navbar-custom {
			background: linear-gradient(135deg, #2c3e50, #34495e);
		}

		.card-custom {
			border: none;
			border-radius: 10px;
			box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
		}

		.btn-primary-custom {
			background: linear-gradient(135deg, #3498db, #2980b9);
			border: none;
		}

		.jugador-card {
			transition: transform 0.2s;
		}

		.jugador-card:hover {
			transform: translateY(-5px);
		}

		.numero-badge {
			font-size: 1.5rem;
			padding: 0.5rem 1rem;
			border-radius: 50%;
			width: 60px;
			height: 60px;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.posicion-badge {
			font-size: 0.9rem;
			padding: 0.5rem 1rem;
		}

		.posicion-delantero {
			background: linear-gradient(135deg, #e74c3c, #c0392b);
		}

		.posicion-mediocampista {
			background: linear-gradient(135deg, #3498db, #2980b9);
		}

		.posicion-defensa {
			background: linear-gradient(135deg, #27ae60, #229954);
		}

		.posicion-portero {
			background: linear-gradient(135deg, #f39c12, #e67e22);
		}

		.sin-club {
			background: linear-gradient(135deg, #95a5a6, #7f8c8d);
		}
	</style>
</head>

<body>
	<!-- Navigation -->
	<nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
		<div class="container">
			<a class="navbar-brand" th:href="@{/}">
				<i class="fas fa-futbol me-2"></i>Sistema de Fútbol
			</a>
			<div class="navbar-nav ms-auto">
				<a class="nav-link" th:href="@{/}">Inicio</a>
				<a class="nav-link" th:href="@{/asociaciones}">Asociaciones</a>
				<a class="nav-link" th:href="@{/clubes}">Clubes</a>
				<a class="nav-link" th:href="@{/jugadores}">Jugadores</a>
				<a class="nav-link" th:href="@{/entrenadores}">Entrenadores</a>
				<a class="nav-link" th:href="@{/competiciones}">Competiciones</a>
				<a class="nav-link" th:href="@{/h2-console}" target="_blank">Base de Datos</a>
			</div>
		</div>
	</nav>

	<div class="container mt-4">
		<div class="d-flex justify-content-between align-items-center mb-4">
			<h2><i class="fas fa-running me-2"></i> <span th:text="${titulo}">Jugadores</span></h2>
			<a th:href="@{/jugadores/nuevo}" class="btn btn-primary-custom text-white">
				<i class="fas fa-plus me-2"></i>Nuevo Jugador
			</a>
		</div>

		<!-- Filtros y Búsqueda -->
		<div class="card card-custom mb-4">
			<div class="card-body">
				<form th:action="@{/jugadores/buscar}" method="get" class="row g-3">
					<div class="col-md-4">
						<label class="form-label">Buscar por Posición</label>
						<select name="posicion" class="form-select">
							<option value="">Todas las posiciones</option>
							<option value="Portero">Portero</option>
							<option value="Defensa">Defensa</option>
							<option value="Mediocampista">Mediocampista</option>
							<option value="Delantero">Delantero</option>
						</select>
					</div>
					<div class="col-md-4">
						<label class="form-label">Buscar por Apellido</label>
						<input type="text" name="apellido" class="form-control" placeholder="Ej: Rodríguez">
					</div>
					<div class="col-md-4 d-flex align-items-end">
						<button type="submit" class="btn btn-primary me-2">
							<i class="fas fa-search me-2"></i>Buscar
						</button>
						<a th:href="@{/jugadores}" class="btn btn-secondary">
							<i class="fas fa-redo me-2"></i>Limpiar
						</a>
					</div>
				</form>
			</div>
		</div>

		<!-- Lista de jugadores -->
		<div class="card card-custom">
			<div class="card-body">
				<div th:if="${jugadores == null or jugadores.empty}" class="text-center py-5">
					<i class="fas fa-user-slash fa-4x text-muted mb-3"></i>
					<h5 class="text-muted">No hay jugadores registrados</h5>
					<p class="text-muted">Comienza agregando un nuevo jugador al sistema.</p>
					<a th:href="@{/jugadores/nuevo}" class="btn btn-primary-custom text-white">
						<i class="fas fa-plus me-2"></i>Crear Primer Jugador
					</a>
				</div>

				<div th:unless="${jugadores == null or jugadores.empty}" class="row">
					<div th:each="jugador : ${jugadores}" class="col-md-6 col-lg-4 mb-4">
						<div class="card h-100 jugador-card">
							<!-- Header con color según posición -->
							<div class="card-header text-white"
								th:classappend="${jugador.posicion == 'Delantero'} ? 'posicion-delantero' : 
                                                 (${jugador.posicion == 'Mediocampista'} ? 'posicion-mediocampista' : 
                                                 (${jugador.posicion == 'Defensa'} ? 'posicion-defensa' : 
                                                 (${jugador.posicion == 'Portero'} ? 'posicion-portero' : 'bg-secondary')))">
								<div class="d-flex justify-content-between align-items-center">
									<div>
										<h6 class="mb-0">
											<i class="fas fa-user me-2"></i>
											<span th:text="${jugador.nombre + ' ' + jugador.apellido}">Nombre
												Jugador</span>
										</h6>
									</div>
									<div class="numero-badge bg-white text-dark fw-bold">
										<span th:text="${jugador.numero}">10</span>
									</div>
								</div>
							</div>

							<div class="card-body">
								<div class="text-center mb-3">
									<span class="badge posicion-badge text-white"
										th:classappend="${jugador.posicion == 'Delantero'} ? 'posicion-delantero' : 
                                                          (${jugador.posicion == 'Mediocampista'} ? 'posicion-mediocampista' : 
                                                          (${jugador.posicion == 'Defensa'} ? 'posicion-defensa' : 
                                                          (${jugador.posicion == 'Portero'} ? 'posicion-portero' : 'bg-secondary')))"
										th:text="${jugador.posicion}">
										Posición
									</span>
								</div>

								<hr>

								<p class="card-text mb-2">
									<i class="fas fa-user me-2 text-muted"></i>
									<strong>Nombre:</strong>
									<span th:text="${jugador.nombre}">Nombre</span>
								</p>
								<p class="card-text mb-2">
									<i class="fas fa-id-card me-2 text-muted"></i>
									<strong>Apellido:</strong>
									<span th:text="${jugador.apellido}">Apellido</span>
								</p>
								<p class="card-text mb-2">
									<i class="fas fa-hashtag me-2 text-muted"></i>
									<strong>Número:</strong>
									<span class="badge bg-dark" th:text="${jugador.numero}">10</span>
								</p>

								<hr>

								<!-- Información del Club -->
								<p class="card-text mb-2">
									<i class="fas fa-shield-alt me-2 text-muted"></i>
									<strong>Club:</strong>
									<span th:if="${jugador.club != null}" class="badge bg-primary"
										th:text="${jugador.club.nombre}">
										Nombre Club
									</span>
									<span th:if="${jugador.club == null}" class="badge sin-club text-white">
										Sin Club
									</span>
								</p>

								<!-- Información adicional del club si existe -->
								<div th:if="${jugador.club != null}" class="mt-2 small text-muted">
									<i class="fas fa-info-circle me-1"></i>
									<span th:if="${jugador.club.ciudad != null}">
										<span th:text="${jugador.club.ciudad}">Ciudad</span>
									</span>
								</div>
							</div>

							<div class="card-footer bg-transparent">
								<div class="btn-group w-100" role="group">
									<a th:href="@{/jugadores/editar/{id}(id=${jugador.id})}"
										class="btn btn-sm btn-outline-warning">
										<i class="fas fa-edit"></i> Editar
									</a>
									<a th:href="@{/jugadores/eliminar/{id}(id=${jugador.id})}"
										class="btn btn-sm btn-outline-danger"
										onclick="return confirm('¿Estás seguro de eliminar este jugador?')">
										<i class="fas fa-trash"></i> Eliminar
									</a>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- ✅ USANDO ESTADÍSTICAS DEL CONTROLADOR -->
		<div th:if="${jugadores != null and !jugadores.empty}" class="row mt-4">
			<div class="col-md-3">
				<div class="card card-custom text-center">
					<div class="card-body">
						<i class="fas fa-users fa-2x text-primary mb-2"></i>
						<h4 th:text="${jugadores.size()}">0</h4>
						<p class="text-muted mb-0">Total Jugadores</p>
					</div>
				</div>
			</div>
			<div class="col-md-3">
				<div class="card card-custom text-center">
					<div class="card-body">
						<i class="fas fa-futbol fa-2x posicion-delantero text-white mb-2"></i>
						<h4 th:text="${totalDelanteros}">0</h4>
						<p class="text-muted mb-0">Delanteros</p>
					</div>
				</div>
			</div>
			<div class="col-md-3">
				<div class="card card-custom text-center">
					<div class="card-body">
						<i class="fas fa-running fa-2x posicion-mediocampista text-white mb-2"></i>
						<h4 th:text="${totalMediocampistas}">0</h4>
						<p class="text-muted mb-0">Mediocampistas</p>
					</div>
				</div>
			</div>
			<div class="col-md-3">
				<div class="card card-custom text-center">
					<div class="card-body">
						<i class="fas fa-shield-alt fa-2x posicion-defensa text-white mb-2"></i>
						<h4 th:text="${totalDefensas}">0</h4>
						<p class="text-muted mb-0">Defensas</p>
					</div>
				</div>
			</div>
		</div>

		<!-- Footer -->
		<footer class="bg-dark text-white mt-5 py-4">
			<div class="container text-center">
				<p class="mb-0">
					<i class="fas fa-futbol me-2"></i>
					Sistema de Gestión de Fútbol &copy; 2024
				</p>
			</div>
		</footer>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>